<!-- templates/sermon.html -->
<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>ì„¤êµ í”„ë¡¬í”„íŠ¸ ì œì‘</title>
    <link rel="stylesheet" href="/static/css/style.css" />
    <style>
      .page-wrap {
        max-width: 1180px;
        margin: 0 auto;
        display: grid;
        grid-template-columns: 280px 1fr;
        gap: 16px;
        padding: 16px 20px 60px;
      }
      .left-col input,
      .left-col textarea {
        width: 100%;
        box-sizing: border-box;
      }
      .block {
        margin-bottom: 12px;
      }
      .output-box {
        background: rgba(15, 23, 42, 0.35);
        border: 1px solid rgba(148, 163, 184, 0.14);
        border-radius: 10px;
        padding: 10px 12px 14px;
      }
      textarea {
        background: rgba(15, 23, 42, 0.35);
        border: 1px solid rgba(148, 163, 184, 0.22);
        border-radius: 10px;
        color: #e2e8f0;
        width: 100%;
        box-sizing: border-box;
        min-height: 90px;
        resize: none;
        overflow: hidden;
      }
      .btn-row {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }
      button {
        background: #2563eb;
        border: none;
        color: #fff;
        border-radius: 10px;
        padding: 6px 12px;
        cursor: pointer;
      }
      button.secondary {
        background: rgba(148, 163, 184, 0.12);
      }
      .hidden {
        display: none !important;
      }
      .guideline-tabs {
        display: flex;
        gap: 6px;
        margin-bottom: 8px;
      }
      .g-tab {
        background: rgba(148, 163, 184, 0.08);
        border: none;
        color: #e2e8f0;
        padding: 4px 10px;
        border-radius: 6px;
        cursor: pointer;
      }
      .g-tab.active {
        background: #2563eb;
      }
      .two-col {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 14px;
      }
      .loading {
        background: rgba(15, 23, 42, 0.6);
        border: 1px solid rgba(148, 163, 184, 0.25);
        border-radius: 8px;
        padding: 6px 12px;
        font-size: 13px;
        margin-bottom: 12px;
        display: none;
      }
      .loading.show {
        display: inline-block;
      }
      /* ë‚˜ëˆ”ì§€ ë°•ìŠ¤ */
      #discussionBox {
        background: rgba(15, 23, 42, 0.35);
        border: 1px solid rgba(148, 163, 184, 0.14);
        border-radius: 10px;
        padding: 10px 12px 14px;
        margin-top: 16px;
      }
    </style>
  </head>
  <body>
 <div class="topbar">
  <div class="container" style="display:flex; gap:10px; align-items:center;">
    <a href="/" class="nav-btn {{ 'active' if request.path=='/' else '' }}">ë§¤ì¼ì„±ê²½</a>
    <a href="/sermon" class="nav-btn {{ 'active' if request.path.startswith('/sermon') else '' }}">ì„¤êµ</a>
    <a href="/visit" class="nav-btn {{ 'active' if request.path.startswith('/visit') else '' }}">ì‹¬ë°©</a>
  </div>
</div>
    </div>

    <div class="page-wrap">
      <!-- ì™¼ìª½ ì…ë ¥ -->
      <div class="left-col">
        <div class="block">
          <label>ì¹´í…Œê³ ë¦¬</label>
          <select id="sermonCategory" class="input">
            <option value="ìƒˆë²½">ìƒˆë²½</option>
            <option value="ìˆ˜ìš”ì„±ê²½ê³µë¶€">ìˆ˜ìš”ì„±ê²½ê³µë¶€</option>
            <option value="ê¸ˆìš”ê¸°ë„íšŒ">ê¸ˆìš”ê¸°ë„íšŒ</option>
            <option value="ì†íšŒê³µê³¼">ì†íšŒê³µê³¼</option>
            <option value="ì²­ë…„ë¶€">ì²­ë…„ë¶€</option>
            <option value="ì²­ì†Œë…„ë¶€">ì²­ì†Œë…„ë¶€</option>
            <option value="ì¥ë¡€">ì¥ë¡€</option>
            <option value="ì‹¬ë°©">ê°ì¢… ì‹¬ë°©</option>
          </select>
        </div>
        <div class="block">
          <label>ì„¤êµ ì œëª© (ì„ íƒ)</label>
          <input id="sermonTitle" placeholder="ë¹„ì›Œë‘ë©´ GPTê°€ ì¶”ì²œ ì œëª©ì„ ë„£ê²Œ í•œë‹¤." />
        </div>
        <div class="block">
          <label>ë³¸ë¬¸</label>
          <input id="sermonVerse" placeholder="ì˜ˆ: ì°½ 1:1-10" />
        </div>
        <div class="block">
          <label>ë³¸ë¬¸ ë‚´ìš© (ì„ íƒ)</label>
          <textarea id="sermonPassage" class="auto-resize" placeholder="ë³¸ë¬¸ ì „ì²´ë¥¼ ë„£ìœ¼ë©´ ë¶„ì„ì´ ë” ì •í™•í•©ë‹ˆë‹¤."></textarea>
        </div>
        <div class="block btn-row">
          <button id="btnAnalyze" title="ë³¸ë¬¸ì„ ê°ê´€ì ìœ¼ë¡œ ë¶„í•´">ë³¸ë¬¸ ë¶„ì„</button>
        </div>
        <!-- ì²­ë…„/ì²­ì†Œë…„ ë•Œë§Œ ë³´ì¼ ë¶™ì—¬ë„£ê¸° -->
        <div id="youthInput" class="block hidden">
          <label>ì„¤êµ ì›ê³  ë¶™ì—¬ë„£ê¸° (ë‚˜ëˆ”ì§€ìš©)</label>
          <textarea id="sermonRawText" class="auto-resize" placeholder="ì—¬ê¸°ì— ì„¤êµ ì›ê³  ì „ì²´ë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”."></textarea>
          <button id="btnMakeDiscussion" style="margin-top: 6px">ë‚˜ëˆ”ì§€ ìƒì„±</button>
        </div>
      </div>

      <!-- ì˜¤ë¥¸ìª½ -->
      <div class="right-col">
        <!-- ì§€ì¹¨ -->
        <div class="output-box">
          <button id="btnToggleGuides">ì§€ì¹¨ ì—´ê¸° / ë‹«ê¸°</button>
          <div id="guideWrap" class="hidden" style="margin-top: 10px">
            <div class="guideline-tabs">
              <button class="g-tab active" data-g="analysis">ë³¸ë¬¸ ë¶„ì„ ì§€ì¹¨</button>
              <button class="g-tab" data-g="sermon">ì„¤êµë¬¸ ì§€ì¹¨</button>
              <button class="g-tab" data-g="discussion">ë‚˜ëˆ”ì§€ ì§€ì¹¨</button>
            </div>
            <textarea id="guideAnalysis" class="auto-resize"></textarea>
            <textarea id="guideSermon" class="auto-resize hidden"></textarea>
            <textarea id="guideDiscussion" class="auto-resize hidden"></textarea>
            <button id="btnSaveGuides" style="margin-top: 6px">ğŸ’¾ ì§€ì¹¨ ì €ì¥</button>
            <span id="guideSaveStatus" style="margin-left: 6px; font-size: 12px"></span>
          </div>
        </div>

        <!-- ë¶„ì„ ê²°ê³¼ -->
        <div class="output-box">
          <div class="loading" id="loadingBar">GPTë¡œ ë¶„ì„ ì¤‘...</div>
          <h3>ë³¸ë¬¸ ë¶„ì„</h3>
          <div class="two-col">
            <div>
              <label>â‘  ë°°ê²½/ê°ê´€ ì •ë³´</label>
              <textarea id="analysisBackground" class="auto-resize"></textarea>
            </div>
            <div>
              <label>â‘¡ ë³¸ë¬¸ ë¹„êµÂ·ì›ì–´ ì •ë¦¬</label>
              <textarea id="analysisTextual" class="auto-resize"></textarea>
            </div>
          </div>
          <button id="btnMakeSermonPrompt" style="margin-top: 8px">ì„¤êµë¬¸ í”„ë¡¬í¬íŠ¸ ì‘ì„±</button>
        </div>

        <!-- ì„¤êµë¬¸ í”„ë¡¬í¬íŠ¸ -->
        <div class="output-box">
          <h3>ì„¤êµë¬¸ í”„ë¡¬í¬íŠ¸</h3>
          <textarea id="sermonPrompt" class="auto-resize"></textarea>
          <button id="btnCopySermonPrompt" style="margin-top: 6px">í”„ë¡¬í¬íŠ¸ ë³µì‚¬</button>
        </div>

        <!-- ë‚˜ëˆ”ì§€ ì¶œë ¥ -->
        <div id="discussionBox" class="hidden">
          <h3>ë‚˜ëˆ”ì§€</h3>
          <textarea id="discussionOutput" class="auto-resize"></textarea>
          <button id="btnCopyDiscussion" style="margin-top: 6px">ë‚˜ëˆ”ì§€ ë³µì‚¬</button>
        </div>
      </div>
    </div>

    <script src="/static/js/sermon.js"></script>
  </body>
</html>